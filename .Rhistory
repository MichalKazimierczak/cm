'\\documentclass{article}',
'\\usepackage{graphicx}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\includegraphics[scale=1.5]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
library(tinytex)
tynytex::is_tinytex()
tinytex::is_tinytex()
library(tinytex)
library(tinytex)
library(tinytex)
writeLines(c(
'\\documentclass{12pt, a4}{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.5]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.5]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
tinytex::parse_packages(
text = "! LaTeX Error: File `biblatex.sty' not found."
)
writeLines(c(
'\\documentclass{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.5]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{outlines}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
tinytex::parse_packages(
text = "! LaTeX Error: File `outlines.sty' not found."
)
tinytex::parse_packages(
text = "! LaTeX Error: File `outlines.sty' not found."
)
tinytex::parse_packages(
text = "! LaTeX Error: File `outline.sty' not found."
)
tinytex::parse_packages(
text = "! LaTeX Error: File `outlines.sty' not found."
)
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{outlines}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{outlines}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{outlines}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
detach("package:tinytex", unload = TRUE)
library(tinytex)
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{outlines}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\1 cos',
'\\2 cos2'
'\\includegraphics[scale=1.0]{time_variant.jpg}',
writeLines(c(
'\\documentclass[12pt, a4]{article}',
'\\usepackage{graphicx}',
'\\usepackage{biblatex}',
'\\title{New document title}',
'\\author{Michal Kazimierczak}',
'\\begin{document}',
'\\maketitle',
'\\newpage',
'\\1 cos',
'\\2 cos2',
'\\includegraphics[scale=1.0]{time_variant.jpg}',
'\\end{document}'
), 'test.tex')
tinytex::pdflatex('test.tex')
library(data.table)
library(ggplot2)
library(grid)
library(gridExtra)
library(stringr)
####Now use seizures information to check whether seizures concerning rail transport
####evolved in the similar manner as volumes transported by rail
s<-readRDS("Y:/ESS/OECD/data/seizures_cleaned/seizures_2015_2021.rds")
s$year<-format(s$date,"%Y")
unique(s$R.TRANSPORT.DESCRIPTION)
####harmonize transport description information
s$R.TRANSPORT.DESCRIPTION<-ifelse(s$R.TRANSPORT.DESCRIPTION%in%c("Postal","Post","Postal Transport","Postal Consignment"),"Postal",
ifelse(s$R.TRANSPORT.DESCRIPTION%in%c("Sea","Sea transport"),"Sea",
ifelse(s$R.TRANSPORT.DESCRIPTION%in%c("Air","air","Air transport"),"Air",
ifelse(s$R.TRANSPORT.DESCRIPTION%in%c("Express courier","EC"),"Express courier",
ifelse(s$R.TRANSPORT.DESCRIPTION%in%c("Road","Road transport"),"Road",
ifelse(s$R.TRANSPORT.DESCRIPTION%in%c("Rail","Rail transport"),"Rail",
"Other"))))))
unique(s$R.TRANSPORT.DESCRIPTION)
st<-data.table(s)[,.(n=uniqueN(CASE_ID),v=sum(value,na.rm=T)),
by=.(year,R.TRANSPORT.DESCRIPTION)]
st<-st[st$year!="2021",]
b<-st[st$year=="2015",]
colnames(b)[c(3,4)]<-c("base_n","base_v")
b$year<-NULL
st<-merge(st,b,by="R.TRANSPORT.DESCRIPTION")
st$i_n<-st$n/st$base_n*100
st$i_v<-st$v/st$base_v*100
View(st)
st<-data.table(s)[s$R.DEPARTURE_COUNTRY=="CN",.(n=uniqueN(CASE_ID),v=sum(value,na.rm=T)),
by=.(year,R.TRANSPORT.DESCRIPTION)]
st<-st[st$year!="2021",]
b<-st[st$year=="2015",]
colnames(b)[c(3,4)]<-c("base_n","base_v")
b$year<-NULL
st<-merge(st,b,by="R.TRANSPORT.DESCRIPTION")
st$i_n<-st$n/st$base_n*100
st$i_v<-st$v/st$base_v*100
View(st)
View(st)
View(s)
View(st)
library(dplyr)
library(tidyr)
str<-pivot_longer(st[st$R.TRANSPORT.DESCRIPTION=="Rail",],
cols=n:i_v)
View(str)
View(st)
str<-pivot_longer(st[st$R.TRANSPORT.DESCRIPTION=="Rail",c(1:4)],
cols=c("n","v"))
View(str)
View(str)
st<-data.table(s)[s$R.DEPARTURE_COUNTRY=="CN",.(n=uniqueN(CASE_ID),v=sum(value,na.rm=T)),
by=.(year,R.TRANSPORT.DESCRIPTION)]
st<-st[st$year!="2021",]
b<-st[st$year=="2015",]
colnames(b)[c(3,4)]<-c("base_n","base_v")
b$year<-NULL
st<-merge(st,b,by="R.TRANSPORT.DESCRIPTION")
st$i_n<-st$n/st$base_n*100
st$i_v<-st$v/st$base_v*100
str<-pivot_longer(st[st$R.TRANSPORT.DESCRIPTION=="Rail",c(1:4)],
cols=c("n","v"))
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(aes(,color="steelblue"))+
facet_wrap(.~name)
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(aes(color="steelblue"))
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",color="steelblue")+
facet_wrap(.~name)
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",color="steelblue")
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(.~name)
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(.~name)
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.)
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.,ncol=1)
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.,ncol=1,scales="free")
p
options(scipen=999)
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.,ncol=1,scales="free")
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.,ncol=1,scales="free")+
scale_y_continuous(labels=scales::big_number())
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.,ncol=1,scales="free")+
scale_y_continuous(labels=scales::number_format(big.mark=" "))
p
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.,ncol=1,scales="free")+
scale_y_continuous(labels=scales::number_format(big.mark=" "))+
ylab("")
p
str$name<-factor(str$name,
levels=c("n","v"),
labels=c("Number of seizures","Value of seizures"))
p<-ggplot(str,
aes(x=year,y=value))+
geom_bar(stat="identity",fill="steelblue")+
facet_wrap(name~.,ncol=1,scales="free")+
scale_y_continuous(labels=scales::number_format(big.mark=" "))+
ylab("")
p
lista<-list.files("https://euipoeuropa-my.sharepoint.com/personal/marie_faria_euipo_europa_eu/_layouts/15/onedrive.aspx?id=%2Fpersonal%2Fmarie%5Ffaria%5Feuipo%5Feuropa%5Feu%2FDocuments%2FWORK%2DSHARE%2FG%26S%2FMICHAL%2DGS&fromShare=true&ga=1")
GS2014 <- readRDS("Y:/ESS/goods_services/MICHAL-GS/GS2014.rds")
View(GS2014)
GS2014$n<-nchar(GS2014$description)
summary(GS2014$n)
check<-GS2014[GS2014$n>161612,]
check<-GS2014[GS2014$n==161612,]
print(check$description)
library(bacondecomp)
install.packages("bacondecomp")
df<-bacondecomp::castle
View(df)
colnames(df)
df<-df[,c("state","year","sid","treatment_date","post")]
View(df)
load("Y:/ESS/IP impact/Functions/cm/data/legal_forms_regex.rda")
View(l)
check<-l[l$Country=="SK",]
View(check)
View(check)
str_replace_all("LACHEMA AKCIOVA SPLECNOST",l[454,"to.replace"],l[454,"replacement"])
library(stringr)
str_replace_all("LACHEMA AKCIOVA SPLECNOST",l[454,"to.replace"],l[454,"replacement"])
l[454,"replacement"]
View(check)
str_replace_all("LACHEMA AKCIOVA SPLECNOST",l[454,"to.replace"]," ")
str_replace_all("LACHEMA AKCIOVA SPOLECNOST",l[454,"to.replace"]," ")
View(l)
View(check)
l[454,"to.replace"]<-"
^(\bAS\b)? ?AKCIOVA ?(SPOLECNOST|SPOL) ?(\bAS\b)? | (\bAS\b)? ?AKCIOVA ?(SPOLECNOST|SPOL) ?(\bAS\b)? | (\bAS\b)? ?AKCIOVA ?(SPOLECNOST|SPOL) ?(\bAS\b)?$"
str_replace_all("LACHEMA AKCIOVA SPOLECNOST",l[454,"to.replace"]," ")
View(check)
View(check)
load("Y:/ESS/IP impact/Functions/cm/data/weak_words_regex.rda")
View(w)
View(w)
View(w)
check<-l[l$Country=="SI",]
View(check)
View(w)
View(check)
l[450,"to.replace"]<-"ZDRUZENJE|DRUSTVO"
View(l)
View(check)
check<-l[l$Country=="SE",]
View(check)
View(check)
l[432,"to.replace"]
l[432,"to.replace"]<-"^CO ?OPERATIVE | CO ?OPERATIVE | CO ?OPERATIVE$"
check2<-str_detect(check,";")
check2<-check[str_detect(check,";"),]
check2<-check[str_detect(check$lf,"\;"),]
check2<-sample[str_detect(sample$lf,"\;"),]
check2<-sample[str_detect(sample$lf,";"),]
check<-l[l$Country=="RO",]
View(check)
View(check)
l[409,"to.replace"]
l[409,"to.replace"]<-"(?:\bSOC\b|\bSOCIET\b|SOCIETATE|SOCIETATEA|^S| S) ?(PER)? ?A(?:C|CT|CTIUNI)( |$)"
View(w)
w[52,"to.replace"]
View(check)
View(check)
order=440)
l<-rbind(l,data.frame(Country="RO",
to.replace="FUNDATIA",
replacement="FOUNDATION",
order=440))
l<-rbind(l,data.frame(Country="PL",
to.replace="FUNDATIA",
replacement="FOUNDATION",
order=440))
View(check)
check<-l[l$Country=="PL",]
View(check)
View(check)
l<-rbind(l,data.frame(Country="PL",
to.replace="SPOLDZIELNIA",
replacement="SPOLDZIELNIA",
order=422))
View(check)
l[391,"to.replace"]
l[391,"to.replace"]<-"(?:SPOLKA| SPOL| S|^S| SP|^SP| S KA|^S KA) ?Z? ?O(?:GRAN.CZONA?|GRANICZ)? ?O(?:DPOWIEDZIALNO ?S?CIA?|DP|ODPOWIEDZ)?( |$)"
it<-l[l$Country=="IT",]
View(it)
it$Country<-"MT"
View(it)
check<-l[l$Country=="LV",]
View(check)
check<-l[l$Country=="LT",]
View(check)
View(check)
View(check)
l<-rbind(l,data.frame(Country="LT",
to.replace="(^| )M(AZOJI)? ?B(?:ENDRIJA)?( |$)",
replacement="MB",
order=347))
l<-rbind(l,data.frame(Country="LT",
to.replace="(^| )M(AZOJI)? ?B(?:ENDRIJA)?( |$)",
replacement="MB",
order=347))
View(it)
View(w)
View(w)
w<-rbind(w,data.frame(Country="IT",
to.replace=" C$",
replacement="",
order=22))
